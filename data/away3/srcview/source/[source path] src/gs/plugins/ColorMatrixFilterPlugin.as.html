<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>ColorMatrixFilterPlugin.as</title>
<link rel="stylesheet" type="text/css" href="../../../../SourceStyles.css"/>
</head>

<body><pre><span class="ActionScriptComment">/*
VERSION: 1.1
DATE: 3/20/2009
ACTIONSCRIPT VERSION: 3.0 (AS2 version is also available)
UPDATES &amp; MORE DETAILED DOCUMENTATION AT: http://www.TweenMax.com
DESCRIPTION:
    ColorMatrixFilter tweening offers an easy way to tween a DisplayObject&apos;s saturation, hue, contrast,
    brightness, and colorization. The following properties are available (you only need to define the ones you want to tween):
    
        - colorize : uint (colorizing a DisplayObject makes it look as though you&apos;re seeing it through a colored piece of glass whereas tinting it makes every pixel exactly that color. You can control the amount of colorization using the &quot;amount&quot; value where 1 is full strength, 0.5 is half-strength, and 0 has no colorization effect.)
        - amount : Number [1] (only used in conjunction with &quot;colorize&quot;)
        - contrast : Number (1 is normal contrast, 0 has no contrast, and 2 is double the normal contrast, etc.)
        - saturation : Number (1 is normal saturation, 0 makes the DisplayObject look black &amp; white, and 2 would be double the normal saturation)
        - hue : Number (changes the hue of every pixel. Think of it as degrees, so 180 would be rotating the hue to be exactly opposite as normal, 360 would be the same as 0, etc.)
        - brightness : Number (1 is normal brightness, 0 is much darker than normal, and 2 is twice the normal brightness, etc.)
        - threshold : Number (number from 0 to 255 that controls the threshold of where the pixels turn white or black)
        - matrix : Array (If you already have a matrix from a ColorMatrixFilter that you want to tween to, pass it in with the &quot;matrix&quot; property. This makes it possible to match effects created in the Flash IDE.)
        - index : Number (only necessary if you already have a filter applied and you want to target it with the tween.)
        - addFilter : Boolean [false]
        - remove : Boolean [false] (Set remove to true if you want the filter to be removed when the tween completes.)
        
    HINT: If you&apos;d like to match the ColorMatrixFilter values you created in the Flash IDE on a particular object, you can get its matrix like this:
    
        import flash.display.*;
        import flash.filters.*;
        
        function getColorMatrix($mc:DisplayObject):Array {
           var f:Array = $mc.filters, i:uint;
           for (i = 0; i &lt; f.length; i++) {
              if (f[i] is ColorMatrixFilter) {
                 return f[i].matrix;
              }
           }
           return null;
        }
        
        var myOriginalMatrix:Array = getColorMatrix(my_mc); //store it so you can tween back to it anytime like TweenMax.to(my_mc, 1, {colorMatrixFilter:{matrix:myOriginalMatrix}});

    
USAGE:
    import gs.*;
    import gs.plugins.*;
    TweenPlugin.activate([ColorMatrixFilterPlugin]); //only do this once in your SWF to activate the plugin in TweenLite (it is already activated in TweenMax by default)
    
    TweenLite.to(mc, 1, {colorMatrixFilter:{colorize:0xFF0000}});
    
    
BYTES ADDED TO SWF: 1447 (not including dependencies)

AUTHOR: Jack Doyle, jack@greensock.com
Copyright 2009, GreenSock. All rights reserved. This work is subject to the terms in http://www.greensock.com/terms_of_use.html or for corporate Club GreenSock members, the software agreement that was issued with the corporate membership.
*/</span>

<span class="ActionScriptpackage">package</span> <span class="ActionScriptDefault_Text">gs</span>.<span class="ActionScriptDefault_Text">plugins</span> <span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">display</span>.<span class="ActionScriptOperator">*</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">filters</span>.<span class="ActionScriptOperator">*</span>;
    
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">gs</span>.<span class="ActionScriptOperator">*</span>;
    
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">ColorMatrixFilterPlugin</span> <span class="ActionScriptReserved">extends</span> <span class="ActionScriptDefault_Text">FilterPlugin</span> <span class="ActionScriptBracket/Brace">{</span>        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">VERSION</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 1.1;
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">API</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 1.0; <span class="ActionScriptComment">//If the API/Framework for plugins changes in the future, this number helps determine compatibility
</span>        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_idMatrix</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span>1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0<span class="ActionScriptBracket/Brace">]</span>;
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_lumR</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0.212671; <span class="ActionScriptComment">//Red constant - used for a few color matrix filter functions
</span>        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_lumG</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0.715160; <span class="ActionScriptComment">//Green constant - used for a few color matrix filter functions
</span>        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_lumB</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0.072169; <span class="ActionScriptComment">//Blue constant - used for a few color matrix filter functions
</span>        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_matrix</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>;
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_matrixTween</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">EndArrayPlugin</span>;
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">ColorMatrixFilterPlugin</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">super</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptReserved">this</span>.<span class="ActionScriptDefault_Text">propName</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&quot;colorMatrixFilter&quot;</span>;
            <span class="ActionScriptReserved">this</span>.<span class="ActionScriptDefault_Text">overwriteProps</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptString">&quot;colorMatrixFilter&quot;</span><span class="ActionScriptBracket/Brace">]</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">override</span> <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onInitTween</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$target</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span>, <span class="ActionScriptDefault_Text">$value</span><span class="ActionScriptOperator">:*</span>, <span class="ActionScriptDefault_Text">$tween</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">TweenLite</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">_target</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">$target</span>;
            <span class="ActionScriptDefault_Text">_type</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ColorMatrixFilter</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">cmf</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">$value</span>;
            <span class="ActionScriptDefault_Text">initFilter</span><span class="ActionScriptBracket/Brace">({</span><span class="ActionScriptDefault_Text">remove</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">$value</span>.<span class="ActionScriptDefault_Text">remove</span>, <span class="ActionScriptDefault_Text">index</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">$value</span>.<span class="ActionScriptDefault_Text">index</span>, <span class="ActionScriptDefault_Text">addFilter</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">$value</span>.<span class="ActionScriptDefault_Text">addFilter</span><span class="ActionScriptBracket/Brace">}</span>, <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ColorMatrixFilter</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_idMatrix</span>.<span class="ActionScriptDefault_Text">slice</span><span class="ActionScriptBracket/Brace">()))</span>;
            <span class="ActionScriptDefault_Text">_matrix</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ColorMatrixFilter</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_filter</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">matrix</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">endMatrix</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[]</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cmf</span>.<span class="ActionScriptDefault_Text">matrix</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cmf</span>.<span class="ActionScriptDefault_Text">matrix</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">))</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">endMatrix</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">cmf</span>.<span class="ActionScriptDefault_Text">matrix</span>;
            <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cmf</span>.<span class="ActionScriptDefault_Text">relative</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">endMatrix</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_matrix</span>.<span class="ActionScriptDefault_Text">slice</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">endMatrix</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_idMatrix</span>.<span class="ActionScriptDefault_Text">slice</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">endMatrix</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">setBrightness</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">endMatrix</span>, <span class="ActionScriptDefault_Text">cmf</span>.<span class="ActionScriptDefault_Text">brightness</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">endMatrix</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">setContrast</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">endMatrix</span>, <span class="ActionScriptDefault_Text">cmf</span>.<span class="ActionScriptDefault_Text">contrast</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">endMatrix</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">setHue</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">endMatrix</span>, <span class="ActionScriptDefault_Text">cmf</span>.<span class="ActionScriptDefault_Text">hue</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">endMatrix</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">setSaturation</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">endMatrix</span>, <span class="ActionScriptDefault_Text">cmf</span>.<span class="ActionScriptDefault_Text">saturation</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">endMatrix</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">setThreshold</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">endMatrix</span>, <span class="ActionScriptDefault_Text">cmf</span>.<span class="ActionScriptDefault_Text">threshold</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(!</span><span class="ActionScriptDefault_Text">isNaN</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cmf</span>.<span class="ActionScriptDefault_Text">colorize</span><span class="ActionScriptBracket/Brace">))</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">endMatrix</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">colorize</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">endMatrix</span>, <span class="ActionScriptDefault_Text">cmf</span>.<span class="ActionScriptDefault_Text">colorize</span>, <span class="ActionScriptDefault_Text">cmf</span>.<span class="ActionScriptDefault_Text">amount</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">_matrixTween</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">EndArrayPlugin</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">_matrixTween</span>.<span class="ActionScriptDefault_Text">init</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_matrix</span>, <span class="ActionScriptDefault_Text">endMatrix</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">true</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">override</span> <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">changeFactor</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$n</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">_matrixTween</span>.<span class="ActionScriptDefault_Text">changeFactor</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">$n</span>;
            <span class="ActionScriptDefault_Text">ColorMatrixFilter</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_filter</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">matrix</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_matrix</span>;
            <span class="ActionScriptReserved">super</span>.<span class="ActionScriptDefault_Text">changeFactor</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">$n</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        
<span class="ActionScriptComment">//---- MATRIX OPERATIONS --------------------------------------------------------------------------------
</span>        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">colorize</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$m</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">$color</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">$amount</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 1<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">isNaN</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$color</span><span class="ActionScriptBracket/Brace">))</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">$m</span>;
            <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">isNaN</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$amount</span><span class="ActionScriptBracket/Brace">))</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">$amount</span> <span class="ActionScriptOperator">=</span> 1;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">r</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">((</span><span class="ActionScriptDefault_Text">$color</span> <span class="ActionScriptOperator">&gt;&gt;</span> 16<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&amp;</span> 0<span class="ActionScriptDefault_Text">xff</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">/</span> 255;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">g</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">((</span><span class="ActionScriptDefault_Text">$color</span> <span class="ActionScriptOperator">&gt;&gt;</span> 8<span class="ActionScriptBracket/Brace">)</span>  <span class="ActionScriptOperator">&amp;</span> 0<span class="ActionScriptDefault_Text">xff</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">/</span> 255;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">b</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$color</span>         <span class="ActionScriptOperator">&amp;</span> 0<span class="ActionScriptDefault_Text">xff</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">/</span> 255;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">inv</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 1 <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">$amount</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">temp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">inv</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">$amount</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">r</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_lumR</span>, <span class="ActionScriptDefault_Text">$amount</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">r</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_lumG</span>,       <span class="ActionScriptDefault_Text">$amount</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">r</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_lumB</span>,       0, 0,
                              <span class="ActionScriptDefault_Text">$amount</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">g</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_lumR</span>,        <span class="ActionScriptDefault_Text">inv</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">$amount</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">g</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_lumG</span>, <span class="ActionScriptDefault_Text">$amount</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">g</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_lumB</span>,       0, 0,
                              <span class="ActionScriptDefault_Text">$amount</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">b</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_lumR</span>,        <span class="ActionScriptDefault_Text">$amount</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">b</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_lumG</span>,       <span class="ActionScriptDefault_Text">inv</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">$amount</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">b</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_lumB</span>, 0, 0,
                              0,                           0,                          0,                         1, 0<span class="ActionScriptBracket/Brace">]</span>;        
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">applyMatrix</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">temp</span>, <span class="ActionScriptDefault_Text">$m</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">setThreshold</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$m</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">$n</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">isNaN</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$n</span><span class="ActionScriptBracket/Brace">))</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">$m</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">temp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_lumR</span> <span class="ActionScriptOperator">*</span> 256, <span class="ActionScriptDefault_Text">_lumG</span> <span class="ActionScriptOperator">*</span> 256, <span class="ActionScriptDefault_Text">_lumB</span> <span class="ActionScriptOperator">*</span> 256, 0,  <span class="ActionScriptOperator">-</span>256 <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">$n</span>, 
                        <span class="ActionScriptDefault_Text">_lumR</span> <span class="ActionScriptOperator">*</span> 256, <span class="ActionScriptDefault_Text">_lumG</span> <span class="ActionScriptOperator">*</span> 256, <span class="ActionScriptDefault_Text">_lumB</span> <span class="ActionScriptOperator">*</span> 256, 0,  <span class="ActionScriptOperator">-</span>256 <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">$n</span>, 
                        <span class="ActionScriptDefault_Text">_lumR</span> <span class="ActionScriptOperator">*</span> 256, <span class="ActionScriptDefault_Text">_lumG</span> <span class="ActionScriptOperator">*</span> 256, <span class="ActionScriptDefault_Text">_lumB</span> <span class="ActionScriptOperator">*</span> 256, 0,  <span class="ActionScriptOperator">-</span>256 <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">$n</span>, 
                        0,           0,           0,           1,  0<span class="ActionScriptBracket/Brace">]</span>; 
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">applyMatrix</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">temp</span>, <span class="ActionScriptDefault_Text">$m</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">setHue</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$m</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">$n</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">isNaN</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$n</span><span class="ActionScriptBracket/Brace">))</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">$m</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">$n</span> <span class="ActionScriptOperator">*=</span> <span class="ActionScriptDefault_Text">Math</span>.<span class="ActionScriptDefault_Text">PI</span> <span class="ActionScriptOperator">/</span> 180;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">c</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Math</span>.<span class="ActionScriptDefault_Text">cos</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$n</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">s</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Math</span>.<span class="ActionScriptDefault_Text">sin</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$n</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">temp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[(</span><span class="ActionScriptDefault_Text">_lumR</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">c</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptBracket/Brace">(</span>1 <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">_lumR</span><span class="ActionScriptBracket/Brace">)))</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">s</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">_lumR</span><span class="ActionScriptBracket/Brace">))</span>, <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_lumG</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">c</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">_lumG</span><span class="ActionScriptBracket/Brace">)))</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">s</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">_lumG</span><span class="ActionScriptBracket/Brace">))</span>, <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_lumB</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">c</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">_lumB</span><span class="ActionScriptBracket/Brace">)))</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">s</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptBracket/Brace">(</span>1 <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">_lumB</span><span class="ActionScriptBracket/Brace">))</span>, 0, 0, <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_lumR</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">c</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">_lumR</span><span class="ActionScriptBracket/Brace">)))</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">s</span> <span class="ActionScriptOperator">*</span> 0.143<span class="ActionScriptBracket/Brace">)</span>, <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_lumG</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">c</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptBracket/Brace">(</span>1 <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">_lumG</span><span class="ActionScriptBracket/Brace">)))</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">s</span> <span class="ActionScriptOperator">*</span> 0.14<span class="ActionScriptBracket/Brace">)</span>, <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_lumB</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">c</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">_lumB</span><span class="ActionScriptBracket/Brace">)))</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">s</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptOperator">-</span>0.283<span class="ActionScriptBracket/Brace">)</span>, 0, 0, <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_lumR</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">c</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">_lumR</span><span class="ActionScriptBracket/Brace">)))</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">s</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">-</span><span class="ActionScriptBracket/Brace">(</span>1 <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">_lumR</span><span class="ActionScriptBracket/Brace">)))</span>, <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_lumG</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">c</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">_lumG</span><span class="ActionScriptBracket/Brace">)))</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">s</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_lumG</span><span class="ActionScriptBracket/Brace">)</span>, <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_lumB</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">c</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptBracket/Brace">(</span>1 <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">_lumB</span><span class="ActionScriptBracket/Brace">)))</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">s</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_lumB</span><span class="ActionScriptBracket/Brace">)</span>, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1<span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">applyMatrix</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">temp</span>, <span class="ActionScriptDefault_Text">$m</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">setBrightness</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$m</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">$n</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">isNaN</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$n</span><span class="ActionScriptBracket/Brace">))</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">$m</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">$n</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$n</span> <span class="ActionScriptOperator">*</span> 100<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">-</span> 100;
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">applyMatrix</span><span class="ActionScriptBracket/Brace">([</span>1,0,0,0,<span class="ActionScriptDefault_Text">$n</span>,
                                0,1,0,0,<span class="ActionScriptDefault_Text">$n</span>,
                                0,0,1,0,<span class="ActionScriptDefault_Text">$n</span>,
                                0,0,0,1,0,
                                0,0,0,0,1<span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">$m</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">setSaturation</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$m</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">$n</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">isNaN</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$n</span><span class="ActionScriptBracket/Brace">))</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">$m</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">inv</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 1 <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">$n</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">r</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">inv</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_lumR</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">g</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">inv</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_lumG</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">b</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">inv</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_lumB</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">temp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">r</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">$n</span>, <span class="ActionScriptDefault_Text">g</span>     , <span class="ActionScriptDefault_Text">b</span>     , 0, 0,
                              <span class="ActionScriptDefault_Text">r</span>     , <span class="ActionScriptDefault_Text">g</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">$n</span>, <span class="ActionScriptDefault_Text">b</span>     , 0, 0,
                              <span class="ActionScriptDefault_Text">r</span>     , <span class="ActionScriptDefault_Text">g</span>     , <span class="ActionScriptDefault_Text">b</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">$n</span>, 0, 0,
                              0     , 0     , 0     , 1, 0<span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">applyMatrix</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">temp</span>, <span class="ActionScriptDefault_Text">$m</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">setContrast</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$m</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">$n</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">isNaN</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$n</span><span class="ActionScriptBracket/Brace">))</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">$m</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">$n</span> <span class="ActionScriptOperator">+=</span> 0.01;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">temp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">$n</span>,0,0,0,128 <span class="ActionScriptOperator">*</span> <span class="ActionScriptBracket/Brace">(</span>1 <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">$n</span><span class="ActionScriptBracket/Brace">)</span>,
                               0,<span class="ActionScriptDefault_Text">$n</span>,0,0,128 <span class="ActionScriptOperator">*</span> <span class="ActionScriptBracket/Brace">(</span>1 <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">$n</span><span class="ActionScriptBracket/Brace">)</span>,
                               0,0,<span class="ActionScriptDefault_Text">$n</span>,0,128 <span class="ActionScriptOperator">*</span> <span class="ActionScriptBracket/Brace">(</span>1 <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">$n</span><span class="ActionScriptBracket/Brace">)</span>,
                               0,0,0,1,0<span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">applyMatrix</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">temp</span>, <span class="ActionScriptDefault_Text">$m</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">applyMatrix</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$m</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">$m2</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(!(</span><span class="ActionScriptDefault_Text">$m</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">$m2</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">))</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">$m2</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">temp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[]</span>, <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0, <span class="ActionScriptDefault_Text">z</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0, <span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>, <span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>;
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">&lt;</span> 4; <span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">&lt;</span> 5; <span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">==</span> 4<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">$m</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">+</span> 4<span class="ActionScriptBracket/Brace">]</span>;
                    <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptOperator">=</span> 0;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptDefault_Text">temp</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">x</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">$m</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>   <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">$m2</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptBracket/Brace">]</span>      <span class="ActionScriptOperator">+</span> 
                                  <span class="ActionScriptDefault_Text">$m</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">$m2</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">+</span> 5<span class="ActionScriptBracket/Brace">]</span>  <span class="ActionScriptOperator">+</span> 
                                  <span class="ActionScriptDefault_Text">$m</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">+</span>2<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">$m2</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">+</span> 10<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">+</span> 
                                  <span class="ActionScriptDefault_Text">$m</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">+</span>3<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">$m2</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">+</span> 15<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">+</span>
                                  <span class="ActionScriptDefault_Text">z</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">+=</span> 5;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">temp</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span></pre></body>
</html>
