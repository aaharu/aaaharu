<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>AbstractRenderSession.as</title>
<link rel="stylesheet" type="text/css" href="../../../../../SourceStyles.css"/>
</head>

<body><pre><span class="ActionScriptpackage">package</span> <span class="ActionScriptDefault_Text">away3d</span>.<span class="ActionScriptDefault_Text">core</span>.<span class="ActionScriptDefault_Text">render</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span>.<span class="ActionScriptDefault_Text">arcane</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span>.<span class="ActionScriptDefault_Text">containers</span>.<span class="ActionScriptOperator">*</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span>.<span class="ActionScriptDefault_Text">core</span>.<span class="ActionScriptDefault_Text">base</span>.<span class="ActionScriptOperator">*</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span>.<span class="ActionScriptDefault_Text">core</span>.<span class="ActionScriptDefault_Text">clip</span>.<span class="ActionScriptOperator">*</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span>.<span class="ActionScriptDefault_Text">core</span>.<span class="ActionScriptDefault_Text">draw</span>.<span class="ActionScriptOperator">*</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span>.<span class="ActionScriptDefault_Text">core</span>.<span class="ActionScriptDefault_Text">light</span>.<span class="ActionScriptOperator">*</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span>.<span class="ActionScriptDefault_Text">events</span>.<span class="ActionScriptOperator">*</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span>.<span class="ActionScriptDefault_Text">materials</span>.<span class="ActionScriptOperator">*</span>;
    
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">display</span>.<span class="ActionScriptOperator">*</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">events</span>.<span class="ActionScriptOperator">*</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">geom</span>.<span class="ActionScriptOperator">*</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">utils</span>.<span class="ActionScriptOperator">*</span>;
    
    <span class="ActionScriptReserved">use</span> <span class="ActionScriptReserved">namespace</span> <span class="ActionScriptDefault_Text">arcane</span>;
    
    <span class="ActionScriptASDoc">/**
     * Dispatched when the render contents of the session require updating.
     * 
     * @eventType away3d.events.SessionEvent
     */</span>
    <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Event</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">name</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;sessionUpdated&quot;</span>,<span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;away3d.events.SessionEvent&quot;</span><span class="ActionScriptBracket/Brace">)]</span>
    
    <span class="ActionScriptASDoc">/**
    * Abstract Drawing session object containing the method used for drawing the view to screen.
    * Not intended for direct use - use &lt;code&gt;SpriteRenderSession&lt;/code&gt; or &lt;code&gt;BitmapRenderSession&lt;/code&gt;.
    */</span>
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">AbstractRenderSession</span> <span class="ActionScriptReserved">extends</span> <span class="ActionScriptDefault_Text">EventDispatcher</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptASDoc">/** @private */</span>
        <span class="ActionScriptDefault_Text">arcane</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_containers</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Dictionary</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptASDoc">/** @private */</span>
        <span class="ActionScriptDefault_Text">arcane</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_shape</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Shape</span>;
        <span class="ActionScriptASDoc">/** @private */</span>
        <span class="ActionScriptDefault_Text">arcane</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_sprite</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Sprite</span>;
        <span class="ActionScriptASDoc">/** @private */</span>
        <span class="ActionScriptDefault_Text">arcane</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_level</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptOperator">-</span>1;
        <span class="ActionScriptASDoc">/** @private */</span>
        <span class="ActionScriptDefault_Text">arcane</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_material</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">IMaterial</span>;
        <span class="ActionScriptASDoc">/** @private */</span>
        <span class="ActionScriptDefault_Text">arcane</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_renderSource</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object3D</span>;
        <span class="ActionScriptASDoc">/** @private */</span>
        <span class="ActionScriptDefault_Text">arcane</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_layerDirty</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span>;
        <span class="ActionScriptASDoc">/** Array for storing old displayobjects to the canvas */</span>
        <span class="ActionScriptDefault_Text">arcane</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_shapeStore</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>;
        <span class="ActionScriptASDoc">/** Array for storing added displayobjects to the canvas */</span>
        <span class="ActionScriptDefault_Text">arcane</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_shapeActive</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>;
        <span class="ActionScriptASDoc">/** Array for storing old displayobjects to the canvas */</span>
        <span class="ActionScriptDefault_Text">arcane</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_spriteStore</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>;
        <span class="ActionScriptASDoc">/** Array for storing added displayobjects to the canvas */</span>
        <span class="ActionScriptDefault_Text">arcane</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_spriteActive</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>;
        <span class="ActionScriptASDoc">/** @private */</span>
        <span class="ActionScriptDefault_Text">arcane</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">notifySessionUpdate</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(!</span><span class="ActionScriptDefault_Text">hasEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">SessionEvent</span>.<span class="ActionScriptDefault_Text">SESSION_UPDATED</span><span class="ActionScriptBracket/Brace">))</span>
                <span class="ActionScriptReserved">return</span>;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(!</span><span class="ActionScriptDefault_Text">_sessionupdated</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">_sessionupdated</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">SessionEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">SessionEvent</span>.<span class="ActionScriptDefault_Text">SESSION_UPDATED</span>, <span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_sessionupdated</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptASDoc">/** @private */</span>
        <span class="ActionScriptDefault_Text">arcane</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">internalAddSceneSession</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">session</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">AbstractRenderSession</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">sessions</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">session</span><span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptDefault_Text">session</span>.<span class="ActionScriptDefault_Text">addOnSessionUpdate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">onSessionUpdate</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptASDoc">/** @private */</span>
        <span class="ActionScriptDefault_Text">arcane</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">internalRemoveSceneSession</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">session</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">AbstractRenderSession</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">sessions</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[]</span>;
            <span class="ActionScriptDefault_Text">session</span>.<span class="ActionScriptDefault_Text">removeOnSessionUpdate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">onSessionUpdate</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptASDoc">/** @private */</span>
        <span class="ActionScriptDefault_Text">arcane</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">internalAddOwnSession</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">object</span>.<span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">Object3DEvent</span>.<span class="ActionScriptDefault_Text">SESSION_UPDATED</span>, <span class="ActionScriptDefault_Text">onObjectSessionUpdate</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptASDoc">/** @private */</span>
        <span class="ActionScriptDefault_Text">arcane</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">internalRemoveOwnSession</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">object</span>.<span class="ActionScriptDefault_Text">removeEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">Object3DEvent</span>.<span class="ActionScriptDefault_Text">SESSION_UPDATED</span>, <span class="ActionScriptDefault_Text">onObjectSessionUpdate</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_consumer</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">IPrimitiveConsumer</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_shapeStores</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Dictionary</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_shapeActives</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Dictionary</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_spriteStores</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Dictionary</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_spriteActives</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Dictionary</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_spriteLayers</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Dictionary</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_spriteLayer</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Dictionary</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_shapeLayers</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Dictionary</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_shapeLayer</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Dictionary</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_lightShapeLayers</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Dictionary</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_lightShapeLayer</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Dictionary</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_dictionary</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Dictionary</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_array</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_defaultColorTransform</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">ColorTransform</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ColorTransform</span><span class="ActionScriptBracket/Brace">()</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_layerGraphics</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Graphics</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">fill</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">GraphicsBitmapFill</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">GraphicsBitmapFill</span><span class="ActionScriptBracket/Brace">()</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">path</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">GraphicsTrianglePath</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">GraphicsTrianglePath</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Vector</span>.<span class="ActionScriptOperator">&lt;</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">&gt;</span><span class="ActionScriptBracket/Brace">(</span>3<span class="ActionScriptBracket/Brace">)</span>, <span class="ActionScriptReserved">null</span>, <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Vector</span>.<span class="ActionScriptOperator">&lt;</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">&gt;</span><span class="ActionScriptBracket/Brace">(</span>3<span class="ActionScriptBracket/Brace">))</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">end</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">GraphicsEndFill</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">GraphicsEndFill</span><span class="ActionScriptBracket/Brace">()</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">drawing</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Vector</span>.<span class="ActionScriptOperator">&lt;</span><span class="ActionScriptDefault_Text">IGraphicsData</span><span class="ActionScriptOperator">&gt;</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Vector</span>.<span class="ActionScriptOperator">&lt;</span><span class="ActionScriptDefault_Text">IGraphicsData</span><span class="ActionScriptOperator">&gt;</span><span class="ActionScriptBracket/Brace">([</span><span class="ActionScriptDefault_Text">fill</span>, <span class="ActionScriptDefault_Text">path</span>, <span class="ActionScriptDefault_Text">end</span><span class="ActionScriptBracket/Brace">])</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_renderers</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Dictionary</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_renderer</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">IPrimitiveConsumer</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_session</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">AbstractRenderSession</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_sessionupdated</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">SessionEvent</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">a</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">b</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">c</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">d</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">tx</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">ty</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_index1</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_index2</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">v0x</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">v0y</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">v1x</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">v1y</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">v2x</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">v2y</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">a2</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">b2</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">c2</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">d2</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">m</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Matrix</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Matrix</span><span class="ActionScriptBracket/Brace">()</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">area</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>;
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onObjectSessionUpdate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object3DEvent</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">notifySessionUpdate</span><span class="ActionScriptBracket/Brace">()</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getShapeStore</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">View3D</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(!</span><span class="ActionScriptDefault_Text">_shapeStores</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">])</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_shapeStores</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_shapeStores</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">]</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getShapeActive</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">View3D</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(!</span><span class="ActionScriptDefault_Text">_shapeActives</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">])</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_shapeActives</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_shapeActives</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">]</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getSpriteStore</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">View3D</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(!</span><span class="ActionScriptDefault_Text">_spriteStores</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">])</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_spriteStores</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_spriteStores</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">]</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getSpriteActive</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">View3D</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(!</span><span class="ActionScriptDefault_Text">_spriteActives</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">])</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_spriteActives</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_spriteActives</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">]</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getSpriteLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">View3D</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Dictionary</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(!</span><span class="ActionScriptDefault_Text">_spriteLayers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">])</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_spriteLayers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_spriteLayers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">]</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getShapeLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">View3D</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Dictionary</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(!</span><span class="ActionScriptDefault_Text">_shapeLayers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">])</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_shapeLayers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_shapeLayers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">]</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getLightShapeLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">View3D</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Dictionary</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(!</span><span class="ActionScriptDefault_Text">_lightShapeLayers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">])</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_lightShapeLayers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_lightShapeLayers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">]</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onSessionUpdate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">SessionEvent</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/** @private */</span>
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>;
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">DisplayObject</span>;
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">AbstractRenderSession</span>;
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">updated</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span>;
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">primitives</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>;
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">screenZ</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>;
        <span class="ActionScriptASDoc">/**
        * Placeholder for filters property of containers
        */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">filters</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>;
        
        <span class="ActionScriptASDoc">/**
        * Placeholder for alpha property of containers
        */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 1;
        
        <span class="ActionScriptASDoc">/**
        * Placeholder for blendMode property of containers
        */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">blendMode</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;
        
        <span class="ActionScriptASDoc">/**
        * Array of child sessions.
        */</span>
           <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sessions</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
        
        <span class="ActionScriptASDoc">/**
        * Reference to the current graphics object being used for drawing.
        */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">graphics</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Graphics</span>;
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">priconsumers</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Dictionary</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">consumer</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">IPrimitiveConsumer</span>;
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">renderer</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">IPrimitiveConsumer</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_renderer</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">renderer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">val</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">IPrimitiveConsumer</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_renderer</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">val</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptReserved">return</span>;
            
            <span class="ActionScriptDefault_Text">_renderer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">val</span>;
            
            <span class="ActionScriptDefault_Text">clearRenderers</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_session</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">AbstractRenderSession</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">sessions</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">_session</span>.<span class="ActionScriptDefault_Text">clearRenderers</span><span class="ActionScriptBracket/Brace">()</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Adds a session as a child of the session object.
         * 
         * @param    session        The session object to be added as a child.
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addChildSession</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">session</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">AbstractRenderSession</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">sessions</span>.<span class="ActionScriptDefault_Text">indexOf</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">session</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptReserved">return</span>;
            
            <span class="ActionScriptDefault_Text">sessions</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">session</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">session</span>.<span class="ActionScriptDefault_Text">addOnSessionUpdate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">onSessionUpdate</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">session</span>.<span class="ActionScriptDefault_Text">parent</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Removes a child session of the session object.
         * 
         * @param    session        The session object to be removed.
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">removeChildSession</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">session</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">AbstractRenderSession</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">session</span>.<span class="ActionScriptDefault_Text">removeOnSessionUpdate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">onSessionUpdate</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">index</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">sessions</span>.<span class="ActionScriptDefault_Text">indexOf</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">session</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">index</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptReserved">return</span>;
            
            <span class="ActionScriptDefault_Text">sessions</span>.<span class="ActionScriptDefault_Text">splice</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">index</span>, 1<span class="ActionScriptBracket/Brace">)</span>;    
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">clearChildSessions</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_session</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">sessions</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">_session</span>.<span class="ActionScriptDefault_Text">removeOnSessionUpdate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">onSessionUpdate</span><span class="ActionScriptBracket/Brace">)</span>;
                
            <span class="ActionScriptDefault_Text">sessions</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
           <span class="ActionScriptASDoc">/**
            * Creates a new render layer for rendering composite materials.
            * 
            * @see away3d.materials.CompositeMaterial#renderTriangle()
            */</span>
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createLayer</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">throw</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Error</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;Not implemented&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Returns a display object representing the container for the specified view.
         * 
         * @param    view    The view object being rendered.
         * @return            The display object container.
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getContainer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">View3D</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">DisplayObject</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">throw</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Error</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;Not implemented&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
            
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getConsumer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">View3D</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">IPrimitiveConsumer</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_renderers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">])</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_renderers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">]</span>;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_renderer</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_renderers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_renderer</span>.<span class="ActionScriptDefault_Text">clone</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_renderers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parent</span>.<span class="ActionScriptDefault_Text">getConsumer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">clone</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_renderers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span>.<span class="ActionScriptDefault_Text">session</span>.<span class="ActionScriptDefault_Text">renderer</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">IPrimitiveConsumer</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">clone</span><span class="ActionScriptBracket/Brace">()</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getTotalFaces</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">View3D</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">output</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getConsumer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">list</span><span class="ActionScriptBracket/Brace">()</span>.<span class="ActionScriptDefault_Text">length</span>;
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_session</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">sessions</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">output</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">_session</span>.<span class="ActionScriptDefault_Text">getTotalFaces</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">)</span>;
                
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">output</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Clears the render session.
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">clear</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">View3D</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">updated</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">view</span>.<span class="ActionScriptDefault_Text">updated</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">view</span>.<span class="ActionScriptDefault_Text">forceUpdate</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">view</span>.<span class="ActionScriptDefault_Text">scene</span>.<span class="ActionScriptDefault_Text">updatedSessions</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">]</span>;
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_session</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">sessions</span><span class="ActionScriptBracket/Brace">)</span>
                   <span class="ActionScriptDefault_Text">_session</span>.<span class="ActionScriptDefault_Text">clear</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">updated</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                
                <span class="ActionScriptDefault_Text">_consumer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getConsumer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptDefault_Text">_spriteLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getSpriteLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_array</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">_spriteLayer</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptDefault_Text">_array</span>.<span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">=</span> 0;
                
                <span class="ActionScriptDefault_Text">_shapeLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getShapeLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_array</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">_shapeLayer</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptDefault_Text">_array</span>.<span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">=</span> 0;
                
                <span class="ActionScriptDefault_Text">_lightShapeLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getLightShapeLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_dictionary</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">_lightShapeLayer</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_array</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">_dictionary</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptDefault_Text">_array</span>.<span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">=</span> 0;
                
                <span class="ActionScriptDefault_Text">_level</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptOperator">-</span>1;
                
                <span class="ActionScriptDefault_Text">_shapeStore</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getShapeStore</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">_shapeActive</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getShapeActive</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptComment">//clear child shapes
</span>                <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_shapeActive</span>.<span class="ActionScriptDefault_Text">length</span>;
                <span class="ActionScriptReserved">while</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">--</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">_shape</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_shapeActive</span>.<span class="ActionScriptDefault_Text">pop</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptDefault_Text">_shape</span>.<span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">clear</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptDefault_Text">_shape</span>.<span class="ActionScriptDefault_Text">filters</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[]</span>;
                    <span class="ActionScriptDefault_Text">_shape</span>.<span class="ActionScriptDefault_Text">blendMode</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BlendMode</span>.<span class="ActionScriptDefault_Text">NORMAL</span>;
                    <span class="ActionScriptDefault_Text">_shape</span>.<span class="ActionScriptDefault_Text">transform</span>.<span class="ActionScriptDefault_Text">colorTransform</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_defaultColorTransform</span>;
                    <span class="ActionScriptDefault_Text">_shapeStore</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_shape</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                
                <span class="ActionScriptDefault_Text">_spriteStore</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getSpriteStore</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">_spriteActive</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getSpriteActive</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptComment">//clear child sprites
</span>                <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_spriteActive</span>.<span class="ActionScriptDefault_Text">length</span>;
                <span class="ActionScriptReserved">while</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">--</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">_sprite</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_spriteActive</span>.<span class="ActionScriptDefault_Text">pop</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptDefault_Text">_sprite</span>.<span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">clear</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptDefault_Text">_sprite</span>.<span class="ActionScriptDefault_Text">filters</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[]</span>;
                    <span class="ActionScriptReserved">while</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_sprite</span>.<span class="ActionScriptDefault_Text">numChildren</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptDefault_Text">_sprite</span>.<span class="ActionScriptDefault_Text">removeChildAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">_spriteStore</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_sprite</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                
                <span class="ActionScriptComment">//clear primitives consumer
</span>                <span class="ActionScriptDefault_Text">_consumer</span>.<span class="ActionScriptDefault_Text">clear</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">render</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">View3D</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">//index -= priconsumer.length;
</span>            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_session</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">sessions</span><span class="ActionScriptBracket/Brace">)</span>
                   <span class="ActionScriptDefault_Text">_session</span>.<span class="ActionScriptDefault_Text">render</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">)</span>;
               
            <span class="ActionScriptComment">//fill.bitmapData = null;
</span>            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">updated</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">getConsumer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">IRenderer</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">render</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptComment">//if (fill.bitmapData)
</span>            <span class="ActionScriptComment">//    drawBitmapTriangles();
</span>        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">clearRenderers</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">_renderers</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
        * Adds a display object to the render session display list.
        * 
        * @param    child    The display object to add.
        */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addDisplayObject</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">child</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">DisplayObject</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">throw</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Error</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;Not implemented&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getSprite</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">ILayerMaterial</span>, <span class="ActionScriptDefault_Text">level</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>, <span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Sprite</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Sprite</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(!(</span><span class="ActionScriptDefault_Text">_array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_spriteLayer</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">]))</span> 
                <span class="ActionScriptDefault_Text">_array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_spriteLayer</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(!</span><span class="ActionScriptDefault_Text">parent</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">material</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">_material</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">_level</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptOperator">-</span>1;
                <span class="ActionScriptDefault_Text">_material</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">material</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_level</span> <span class="ActionScriptOperator">&gt;=</span> <span class="ActionScriptDefault_Text">level</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">_array</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">_sprite</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_array</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">_level</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">level</span>;
                <span class="ActionScriptDefault_Text">_array</span>.<span class="ActionScriptDefault_Text">unshift</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_sprite</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">createSprite</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptBracket/Brace">))</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_sprite</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getShape</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">ILayerMaterial</span>, <span class="ActionScriptDefault_Text">level</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>, <span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Sprite</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Shape</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(!(</span><span class="ActionScriptDefault_Text">_array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_shapeLayer</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">]))</span>
                <span class="ActionScriptDefault_Text">_array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_shapeLayer</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_level</span> <span class="ActionScriptOperator">&gt;=</span> <span class="ActionScriptDefault_Text">level</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">_array</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">_shape</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_array</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">_level</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">level</span>;
                <span class="ActionScriptDefault_Text">_array</span>.<span class="ActionScriptDefault_Text">unshift</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_shape</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">createShape</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptBracket/Brace">))</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_shape</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getLightShape</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">ILayerMaterial</span>, <span class="ActionScriptDefault_Text">level</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>, <span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Sprite</span>, <span class="ActionScriptDefault_Text">light</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">LightPrimitive</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Shape</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(!(</span><span class="ActionScriptDefault_Text">_dictionary</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_lightShapeLayer</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">]))</span>
                <span class="ActionScriptDefault_Text">_dictionary</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_lightShapeLayer</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(!(</span><span class="ActionScriptDefault_Text">_array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_dictionary</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">light</span><span class="ActionScriptBracket/Brace">]))</span>
                <span class="ActionScriptDefault_Text">_array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_dictionary</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">light</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_level</span> <span class="ActionScriptOperator">&gt;=</span> <span class="ActionScriptDefault_Text">level</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">_array</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">_shape</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_array</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">_level</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">level</span>;
                <span class="ActionScriptDefault_Text">_array</span>.<span class="ActionScriptDefault_Text">unshift</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_shape</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">createShape</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptBracket/Brace">))</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_shape</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createSprite</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Sprite</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Sprite</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">throw</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Error</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;Not implemented&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * @inheritDoc
         */</span>
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createShape</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Sprite</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Shape</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_shapeStore</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">_shapeActive</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_shape</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_shapeStore</span>.<span class="ActionScriptDefault_Text">pop</span><span class="ActionScriptBracket/Brace">())</span>;
            <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">_shapeActive</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_shape</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Shape</span><span class="ActionScriptBracket/Brace">())</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptDefault_Text">parent</span>.<span class="ActionScriptDefault_Text">addChild</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_shape</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptDefault_Text">_layerDirty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_shape</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
        * Draws a non-scaled bitmap into the graphics object.
        */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">renderBitmap</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bitmap</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">BitmapData</span>, <span class="ActionScriptDefault_Text">v0</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">ScreenVertex</span>, <span class="ActionScriptDefault_Text">smooth</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_layerDirty</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">createLayer</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">m</span>.<span class="ActionScriptDefault_Text">identity</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">m</span>.<span class="ActionScriptDefault_Text">tx</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">v0</span>.<span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">bitmap</span>.<span class="ActionScriptDefault_Text">width</span><span class="ActionScriptOperator">/</span>2; <span class="ActionScriptDefault_Text">m</span>.<span class="ActionScriptDefault_Text">ty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">v0</span>.<span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">bitmap</span>.<span class="ActionScriptDefault_Text">height</span><span class="ActionScriptOperator">/</span>2;
            <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineStyle</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">beginBitmapFill</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bitmap</span>, <span class="ActionScriptDefault_Text">m</span>, <span class="ActionScriptReserved">false</span>,<span class="ActionScriptDefault_Text">smooth</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">drawRect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v0</span>.<span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">bitmap</span>.<span class="ActionScriptDefault_Text">width</span><span class="ActionScriptOperator">/</span>2, <span class="ActionScriptDefault_Text">v0</span>.<span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">bitmap</span>.<span class="ActionScriptDefault_Text">height</span><span class="ActionScriptOperator">/</span>2, <span class="ActionScriptDefault_Text">bitmap</span>.<span class="ActionScriptDefault_Text">width</span>, <span class="ActionScriptDefault_Text">bitmap</span>.<span class="ActionScriptDefault_Text">height</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">endFill</span><span class="ActionScriptBracket/Brace">()</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Draws a bitmap with a precalculated matrix into the graphics object.
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">renderScaledBitmap</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">DrawScaledBitmap</span>, <span class="ActionScriptDefault_Text">bitmap</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">BitmapData</span>, <span class="ActionScriptDefault_Text">mapping</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Matrix</span>, <span class="ActionScriptDefault_Text">smooth</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_layerDirty</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">createLayer</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineStyle</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">rotation</span> <span class="ActionScriptOperator">!=</span> 0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>   
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">beginBitmapFill</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bitmap</span>, <span class="ActionScriptDefault_Text">mapping</span>, <span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">smooth</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">moveTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">topleftx</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">toplefty</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">toprightx</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">toprighty</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">bottomrightx</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">bottomrighty</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">bottomleftx</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">bottomlefty</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">topleftx</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">toplefty</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">endFill</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">beginBitmapFill</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bitmap</span>, <span class="ActionScriptDefault_Text">mapping</span>, <span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">smooth</span><span class="ActionScriptBracket/Brace">)</span>;                
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">drawRect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">minX</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">minY</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">maxX</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">minX</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">maxY</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">minY</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">endFill</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Draws a segment element into the graphics object.
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">renderLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v0x</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">v0y</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">v1x</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">v1y</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">width</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">color</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">uint</span>, <span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_layerDirty</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">createLayer</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineStyle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">width</span>, <span class="ActionScriptDefault_Text">color</span>, <span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">moveTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v0x</span>, <span class="ActionScriptDefault_Text">v0y</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v1x</span>, <span class="ActionScriptDefault_Text">v1y</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Draws a triangle element with a bitmap texture into the graphics object.
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">renderTriangleBitmap</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bitmap</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">BitmapData</span>, <span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Matrix</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">endIndex</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">smooth</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span>, <span class="ActionScriptDefault_Text">repeat</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span>, <span class="ActionScriptDefault_Text">layerGraphics</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Graphics</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(!</span><span class="ActionScriptDefault_Text">layerGraphics</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">_layerDirty</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">createLayer</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">_index0</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
            <span class="ActionScriptDefault_Text">_index1</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
            <span class="ActionScriptDefault_Text">_index2</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">+</span>2<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
            
            <span class="ActionScriptDefault_Text">a2</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v1x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index1</span><span class="ActionScriptBracket/Brace">])</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v0x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptBracket/Brace">])</span>;
            <span class="ActionScriptDefault_Text">b2</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v1y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index1</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v0y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span>;
            <span class="ActionScriptDefault_Text">c2</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v2x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index2</span><span class="ActionScriptBracket/Brace">])</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">v0x</span>;
            <span class="ActionScriptDefault_Text">d2</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v2y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index2</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">v0y</span>;
            
            <span class="ActionScriptDefault_Text">m</span>.<span class="ActionScriptDefault_Text">a</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">a</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">map</span>.<span class="ActionScriptDefault_Text">a</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">a2</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">b</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">map</span>.<span class="ActionScriptDefault_Text">b</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">c2</span>;
            <span class="ActionScriptDefault_Text">m</span>.<span class="ActionScriptDefault_Text">b</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">a</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">b2</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">b</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">d2</span>;
            <span class="ActionScriptDefault_Text">m</span>.<span class="ActionScriptDefault_Text">c</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">c</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">map</span>.<span class="ActionScriptDefault_Text">c</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">a2</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">d</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">map</span>.<span class="ActionScriptDefault_Text">d</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">c2</span>;
            <span class="ActionScriptDefault_Text">m</span>.<span class="ActionScriptDefault_Text">d</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">c</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">b2</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">d</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">d2</span>;
            <span class="ActionScriptDefault_Text">m</span>.<span class="ActionScriptDefault_Text">tx</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">tx</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">map</span>.<span class="ActionScriptDefault_Text">tx</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">a2</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">map</span>.<span class="ActionScriptDefault_Text">ty</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">c2</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">v0x</span>;
            <span class="ActionScriptDefault_Text">m</span>.<span class="ActionScriptDefault_Text">ty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">tx</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">b2</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">ty</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">d2</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">v0y</span>;
            
            <span class="ActionScriptDefault_Text">area</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">v0x</span><span class="ActionScriptOperator">*</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">d2</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">b2</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">v1x</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">d2</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">v2x</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">b2</span>;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">area</span> <span class="ActionScriptOperator">&lt;</span> 0<span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">area</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">area</span>;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layerGraphics</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">layerGraphics</span>.<span class="ActionScriptDefault_Text">lineStyle</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">layerGraphics</span>.<span class="ActionScriptDefault_Text">moveTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v0x</span>, <span class="ActionScriptDefault_Text">v0y</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">layerGraphics</span>.<span class="ActionScriptDefault_Text">beginBitmapFill</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bitmap</span>, <span class="ActionScriptDefault_Text">m</span>, <span class="ActionScriptDefault_Text">repeat</span>, <span class="ActionScriptDefault_Text">smooth</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">area</span> <span class="ActionScriptOperator">&gt;</span> 400<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">layerGraphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v1x</span>, <span class="ActionScriptDefault_Text">v1y</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">layerGraphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v2x</span>, <span class="ActionScriptDefault_Text">v2y</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">layerGraphics</span>.<span class="ActionScriptDefault_Text">endFill</span><span class="ActionScriptBracket/Brace">()</span>;
              <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                  <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineStyle</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">moveTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v0x</span>, <span class="ActionScriptDefault_Text">v0y</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">beginBitmapFill</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bitmap</span>, <span class="ActionScriptDefault_Text">m</span>, <span class="ActionScriptDefault_Text">repeat</span>, <span class="ActionScriptDefault_Text">smooth</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">area</span> <span class="ActionScriptOperator">&gt;</span> 400<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v1x</span>, <span class="ActionScriptDefault_Text">v1y</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v2x</span>, <span class="ActionScriptDefault_Text">v2y</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">endFill</span><span class="ActionScriptBracket/Brace">()</span>;
              <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Draws a triangle element with a bitmap texture into the graphics object, with no uv transforms.
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">renderTriangleBitmapMask</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bitmap</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">BitmapData</span>, <span class="ActionScriptDefault_Text">offX</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">offY</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">sc</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">endIndex</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">smooth</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span>, <span class="ActionScriptDefault_Text">repeat</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span>, <span class="ActionScriptDefault_Text">layerGraphics</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Graphics</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_layerDirty</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">createLayer</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">_index0</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
            <span class="ActionScriptDefault_Text">_index1</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
            <span class="ActionScriptDefault_Text">_index2</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">+</span>2<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
            
            <span class="ActionScriptDefault_Text">a2</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v1x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index1</span><span class="ActionScriptBracket/Brace">])</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v0x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptBracket/Brace">])</span>;
            <span class="ActionScriptDefault_Text">b2</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v1y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index1</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v0y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span>;
            <span class="ActionScriptDefault_Text">c2</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v2x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index2</span><span class="ActionScriptBracket/Brace">])</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">v0x</span>;
            <span class="ActionScriptDefault_Text">d2</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v2y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index2</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">v0y</span>;
            
            <span class="ActionScriptDefault_Text">m</span>.<span class="ActionScriptDefault_Text">identity</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">m</span>.<span class="ActionScriptDefault_Text">scale</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">sc</span>, <span class="ActionScriptDefault_Text">sc</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">m</span>.<span class="ActionScriptDefault_Text">translate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">offX</span>, <span class="ActionScriptDefault_Text">offY</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layerGraphics</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">layerGraphics</span>.<span class="ActionScriptDefault_Text">lineStyle</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">layerGraphics</span>.<span class="ActionScriptDefault_Text">moveTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v0x</span>, <span class="ActionScriptDefault_Text">v0y</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">layerGraphics</span>.<span class="ActionScriptDefault_Text">beginBitmapFill</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bitmap</span>, <span class="ActionScriptDefault_Text">m</span>, <span class="ActionScriptDefault_Text">repeat</span>, <span class="ActionScriptDefault_Text">smooth</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v0x</span><span class="ActionScriptOperator">*</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">d2</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">b2</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">v1x</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">d2</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">v2x</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">b2</span> <span class="ActionScriptOperator">&gt;</span> 400<span class="ActionScriptBracket/Brace">))</span>;
                <span class="ActionScriptDefault_Text">layerGraphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v1x</span>, <span class="ActionScriptDefault_Text">v1y</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">layerGraphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v2x</span>, <span class="ActionScriptDefault_Text">v2y</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">layerGraphics</span>.<span class="ActionScriptDefault_Text">endFill</span><span class="ActionScriptBracket/Brace">()</span>;
              <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                  <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineStyle</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">moveTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v0x</span>, <span class="ActionScriptDefault_Text">v0y</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">beginBitmapFill</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bitmap</span>, <span class="ActionScriptDefault_Text">m</span>, <span class="ActionScriptDefault_Text">repeat</span>, <span class="ActionScriptDefault_Text">smooth</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v0x</span><span class="ActionScriptOperator">*</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">d2</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">b2</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">v1x</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">d2</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">v2x</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">b2</span> <span class="ActionScriptOperator">&gt;</span> 400<span class="ActionScriptBracket/Brace">))</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v1x</span>, <span class="ActionScriptDefault_Text">v1y</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v2x</span>, <span class="ActionScriptDefault_Text">v2y</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">endFill</span><span class="ActionScriptBracket/Brace">()</span>;
              <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Draws a triangle element with a bitmap texture into the graphics object (Flash 10)
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">renderTriangleBitmapF10</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bitmap</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">BitmapData</span>, <span class="ActionScriptDefault_Text">uvtData</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Vector</span>.<span class="ActionScriptOperator">&lt;</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">&gt;</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">endIndex</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">smooth</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span>, <span class="ActionScriptDefault_Text">repeat</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span>, <span class="ActionScriptDefault_Text">layerGraphics</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Graphics</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(!</span><span class="ActionScriptDefault_Text">layerGraphics</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">_layerDirty</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">createLayer</span><span class="ActionScriptBracket/Brace">()</span>;
                
            <span class="ActionScriptDefault_Text">_index0</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
            <span class="ActionScriptDefault_Text">_index1</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
            <span class="ActionScriptDefault_Text">_index2</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">+</span>2<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
            
            <span class="ActionScriptDefault_Text">fill</span>.<span class="ActionScriptDefault_Text">bitmapData</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bitmap</span>;
            <span class="ActionScriptDefault_Text">fill</span>.<span class="ActionScriptDefault_Text">repeat</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">repeat</span>;
            <span class="ActionScriptDefault_Text">fill</span>.<span class="ActionScriptDefault_Text">smooth</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">smooth</span>;
            
            <span class="ActionScriptDefault_Text">path</span>.<span class="ActionScriptDefault_Text">vertices</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Vector</span>.<span class="ActionScriptOperator">&lt;</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">&gt;</span><span class="ActionScriptBracket/Brace">([</span><span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span> <span class="ActionScriptOperator">+</span> 1<span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index1</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index1</span> <span class="ActionScriptOperator">+</span> 1<span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index2</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index2</span> <span class="ActionScriptOperator">+</span> 1<span class="ActionScriptBracket/Brace">]])</span>;
            
            <span class="ActionScriptDefault_Text">path</span>.<span class="ActionScriptDefault_Text">uvtData</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">uvtData</span>;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layerGraphics</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">layerGraphics</span>.<span class="ActionScriptDefault_Text">lineStyle</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">layerGraphics</span>.<span class="ActionScriptDefault_Text">drawGraphicsData</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">drawing</span><span class="ActionScriptBracket/Brace">)</span>;
              <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                  <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineStyle</span><span class="ActionScriptBracket/Brace">()</span>;
                  <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">drawGraphicsData</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">drawing</span><span class="ActionScriptBracket/Brace">)</span>;
              <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Draws a triangle element with a fill color into the graphics object.
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">renderTriangleColor</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">color</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>, <span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">commands</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">endIndex</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">layerGraphics</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Graphics</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(!</span><span class="ActionScriptDefault_Text">layerGraphics</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">_layerDirty</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">createLayer</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">applicableGraphics</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Graphics</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layerGraphics</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">layerGraphics</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">graphics</span>;
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">endIndex</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">startIndex</span> <span class="ActionScriptOperator">&gt;</span> 3<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                
                <span class="ActionScriptDefault_Text">applicableGraphics</span>.<span class="ActionScriptDefault_Text">lineStyle</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">applicableGraphics</span>.<span class="ActionScriptDefault_Text">beginFill</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">color</span>, <span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptReserved">while</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">startIndex</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">endIndex</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">_index0</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
                    <span class="ActionScriptReserved">switch</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">commands</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">])</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">&quot;M&quot;</span><span class="ActionScriptOperator">:</span>
                            <span class="ActionScriptDefault_Text">applicableGraphics</span>.<span class="ActionScriptDefault_Text">moveTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span>;
                            <span class="ActionScriptReserved">break</span>;
                        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">&quot;L&quot;</span><span class="ActionScriptOperator">:</span>
                            <span class="ActionScriptDefault_Text">applicableGraphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span>;
                            <span class="ActionScriptReserved">break</span>;
                        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">&quot;C&quot;</span><span class="ActionScriptOperator">:</span>
                            <span class="ActionScriptDefault_Text">_index1</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
                            <span class="ActionScriptDefault_Text">applicableGraphics</span>.<span class="ActionScriptDefault_Text">curveTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index1</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index1</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span>;
                            <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">applicableGraphics</span>.<span class="ActionScriptDefault_Text">endFill</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">_index0</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
                <span class="ActionScriptDefault_Text">_index1</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
                <span class="ActionScriptDefault_Text">_index2</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">+</span>2<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
                <span class="ActionScriptDefault_Text">applicableGraphics</span>.<span class="ActionScriptDefault_Text">lineStyle</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">applicableGraphics</span>.<span class="ActionScriptDefault_Text">moveTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span>; <span class="ActionScriptComment">// Always move before begin will to prevent bugs
</span>                <span class="ActionScriptDefault_Text">applicableGraphics</span>.<span class="ActionScriptDefault_Text">beginFill</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">color</span>, <span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">applicableGraphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index1</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index1</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span>;
                <span class="ActionScriptDefault_Text">applicableGraphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index2</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index2</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span>;
                <span class="ActionScriptDefault_Text">applicableGraphics</span>.<span class="ActionScriptDefault_Text">endFill</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Draws a wire triangle element into the graphics object.
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">renderTriangleLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">width</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">color</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>, <span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">commands</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">endIndex</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_layerDirty</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">createLayer</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineStyle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">width</span>, <span class="ActionScriptDefault_Text">color</span>, <span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">endIndex</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">startIndex</span> <span class="ActionScriptOperator">&gt;</span> 3<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">while</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">startIndex</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">endIndex</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">_index0</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
                    <span class="ActionScriptReserved">switch</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">commands</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">])</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">&quot;M&quot;</span><span class="ActionScriptOperator">:</span>
                            <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">moveTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span>;
                            <span class="ActionScriptReserved">break</span>;
                        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">&quot;L&quot;</span><span class="ActionScriptOperator">:</span>
                            <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span>;
                            <span class="ActionScriptReserved">break</span>;
                        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">&quot;C&quot;</span><span class="ActionScriptOperator">:</span>
                            <span class="ActionScriptDefault_Text">_index1</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
                            <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">curveTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index1</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index1</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span>;
                            <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">_index0</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
                <span class="ActionScriptDefault_Text">_index1</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
                <span class="ActionScriptDefault_Text">_index2</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">+</span>2<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3; 
                
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">moveTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v0x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">v0y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index1</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index1</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index2</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index2</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v0x</span>, <span class="ActionScriptDefault_Text">v0y</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Draws a wire triangle element with a fill color into the graphics object.
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">renderTriangleLineFill</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">width</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">color</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>, <span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">wirecolor</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>, <span class="ActionScriptDefault_Text">wirealpha</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">commands</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>, <span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>, <span class="ActionScriptDefault_Text">endIndex</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_layerDirty</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">createLayer</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wirealpha</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineStyle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">width</span>, <span class="ActionScriptDefault_Text">wirecolor</span>, <span class="ActionScriptDefault_Text">wirealpha</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">else</span>
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineStyle</span><span class="ActionScriptBracket/Brace">()</span>;
                
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">alpha</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">beginFill</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">color</span>, <span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">endIndex</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">startIndex</span> <span class="ActionScriptOperator">&gt;</span> 3<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">while</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">startIndex</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">endIndex</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">_index0</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
                    <span class="ActionScriptReserved">switch</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">commands</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">])</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">&quot;M&quot;</span><span class="ActionScriptOperator">:</span>
                            <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">moveTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span>;
                            <span class="ActionScriptReserved">break</span>;
                        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">&quot;L&quot;</span><span class="ActionScriptOperator">:</span>
                            <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span>;
                            <span class="ActionScriptReserved">break</span>;
                        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">&quot;C&quot;</span><span class="ActionScriptOperator">:</span>
                            <span class="ActionScriptDefault_Text">_index1</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
                            <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">curveTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index1</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index1</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span>;
                            <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">_index0</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
                <span class="ActionScriptDefault_Text">_index1</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
                <span class="ActionScriptDefault_Text">_index2</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenIndices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">startIndex</span><span class="ActionScriptOperator">+</span>2<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">*</span>3;
                
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">moveTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v0x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">v0y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index0</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index1</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index1</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index2</span><span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">screenVertices</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">_index2</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">])</span>;
        
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wirealpha</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">v0x</span>, <span class="ActionScriptDefault_Text">v0y</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">alpha</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">endFill</span><span class="ActionScriptBracket/Brace">()</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Draws a billboard element with a fill color into the graphics object.
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">renderBillboardColor</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">color</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>, <span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span>, <span class="ActionScriptDefault_Text">primitive</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">DrawBillboard</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_layerDirty</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">createLayer</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">rotation</span> <span class="ActionScriptOperator">!=</span> 0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">beginFill</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">color</span>, <span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">moveTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">topleftx</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">toplefty</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">toprightx</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">toprighty</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">bottomrightx</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">bottomrighty</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">bottomleftx</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">bottomlefty</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">topleftx</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">toplefty</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">endFill</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">beginFill</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">color</span>, <span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">drawRect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">minX</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">minY</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">maxX</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">minX</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">maxY</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">minY</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">endFill</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Draws a billboard element with a fill bitmap into the graphics object.
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">renderBillboardBitmap</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bitmap</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">BitmapData</span>, <span class="ActionScriptDefault_Text">primitive</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">DrawBillboard</span>, <span class="ActionScriptDefault_Text">smooth</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_layerDirty</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">createLayer</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">rotation</span> <span class="ActionScriptOperator">!=</span> 0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">beginBitmapFill</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bitmap</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">mapping</span>, <span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">smooth</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">moveTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">topleftx</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">toplefty</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">toprightx</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">toprighty</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">bottomrightx</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">bottomrighty</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">bottomleftx</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">bottomlefty</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineTo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">topleftx</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">toplefty</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">endFill</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">beginBitmapFill</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bitmap</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">mapping</span>, <span class="ActionScriptReserved">false</span>, <span class="ActionScriptDefault_Text">smooth</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">drawRect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">minX</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">minY</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">maxX</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">minX</span>, <span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">maxY</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">primitive</span>.<span class="ActionScriptDefault_Text">minY</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">endFill</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Draws a fog element into the graphics object.
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">renderFogColor</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">clip</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Clipping</span>, <span class="ActionScriptDefault_Text">color</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>, <span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_layerDirty</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">createLayer</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">lineStyle</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">beginFill</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">color</span>, <span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">drawRect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">clip</span>.<span class="ActionScriptDefault_Text">minX</span>, <span class="ActionScriptDefault_Text">clip</span>.<span class="ActionScriptDefault_Text">minY</span>, <span class="ActionScriptDefault_Text">clip</span>.<span class="ActionScriptDefault_Text">maxX</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">clip</span>.<span class="ActionScriptDefault_Text">minX</span>, <span class="ActionScriptDefault_Text">clip</span>.<span class="ActionScriptDefault_Text">maxY</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">clip</span>.<span class="ActionScriptDefault_Text">minY</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">graphics</span>.<span class="ActionScriptDefault_Text">endFill</span><span class="ActionScriptBracket/Brace">()</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Duplicates the render session&apos;s properties to another render session.
         * 
         * @return                        The new render session instance with duplicated properties applied
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">clone</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">AbstractRenderSession</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">throw</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Error</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;Not implemented&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Default method for adding a sessionUpdated event listener
         * 
         * @param    listener        The listener function
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addOnSessionUpdate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">listener</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Function</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">SessionEvent</span>.<span class="ActionScriptDefault_Text">SESSION_UPDATED</span>, <span class="ActionScriptDefault_Text">listener</span>, <span class="ActionScriptReserved">false</span>, 0, <span class="ActionScriptReserved">false</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Default method for removing a sessionUpdated event listener
         * 
         * @param    listener        The listener function
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">removeOnSessionUpdate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">listener</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Function</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">removeEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">SessionEvent</span>.<span class="ActionScriptDefault_Text">SESSION_UPDATED</span>, <span class="ActionScriptDefault_Text">listener</span>, <span class="ActionScriptReserved">false</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span></pre></body>
</html>
